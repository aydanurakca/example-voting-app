pipeline {  
    
agent{       docker{         image 'maven:3.6.1-jdk-8-alpine'         args '-v $HOME/.m2:/root/.m2'       }
    
    stages{      
        stage("build"){          
            steps{              
                echo 'Compiling worker app'
                dir('worker'){
                    sh 'mvn compile'
                }
                
            }      
            
        }      
        stage("test"){          
            steps{              
                echo 'Running Unit Tets on worker app' 
           
            }      
            
        }      
        stage("package"){          
            steps{              
                echo 'Packaging worker app' 
                dir('worker'){                  sh 'mvn package -DskipTests'                  archiveArtifacts artifacts: '**/target/*.jar', fingerprint: true                }
            }      
            
        }  
        
    }  
    
    post{   
        
        always{        
            
            echo 'Building multibranch pipeline for worker is completed..'    
            
        }  
        
    }
    
}













